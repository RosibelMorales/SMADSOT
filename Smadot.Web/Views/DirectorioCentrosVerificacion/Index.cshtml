@using Smadot.Models.Dicts;
@inject Smadot.Utilities.GestionTokens.IUserResolver UserResolver
@{
    ViewData["Title"] = "Directorio de Verificentros";
    Layout = "~/Views/Shared/_LayoutSmadot.cshtml";
}

@section styles{
    <link rel="stylesheet" href="~/lib/datatable/dist/css/dataTables.bootstrap4.min.css" />
    <link rel="stylesheet" href="~/lib/tempus-dominus/css/tempus-dominus.css"/>
    <link rel="stylesheet" href="~/lib/dropzone/dist/dropzone.css" type="text/css" />
    @*<link href="~/assets/plugins/custom/prismjs/prismjs.bundle.css" rel="stylesheet" type="text/css">*@
    <style>
        input:read-only {
            pointer-events: none;
            background: var(--kt-input-disabled-bg);
        }

        .separator {
            
            border-bottom: 0px solid var(--kt-border-color) !important;
        }

        .flatpickr-calendar.static.open {
            right: calc(0%) !important;
        }
    </style>
}

@section breadcrumb{
    <li class="breadcrumb-item">
        <a href="#" class="text-muted text-hover-primary">Trámites</a>
    </li>
    <li class="breadcrumb-item">
        <span class="bullet bg-gray-400 w-5px h-2px"></span>
    </li>
    <li class="breadcrumb-item">
        <a href="#" class="text-muted text-hover-primary">Consultas </a>
    </li>
    <li class="breadcrumb-item">
        <span class="bullet bg-gray-400 w-5px h-2px"></span>
    </li>

    <li class="active">@ViewData["Title"]</li>
}

@section toolbar{
    @*<a class="btn btn-sm fw-bold btn-primary" asp-controller="IngresoFormaValorada" asp-action="Ingresos">Registrar Ingreso</a>
    <a class="btn btn-sm fw-bold btn-primary" asp-controller="IngresoFormaValorada" asp-action="Cajas">Registrar Cajas</a>*@
     @if (UserResolver.HasPermission(MenuDirectorioVerificentros.Registrar))
    {
        <button class="btn btn-sm fw-bold btn-primary" type="button" id="bntRegistrar">Registrar</button>
    }
    <button class="btn btn-sm fw-bold btn-primary" type="button" id="bntCarga">Carga Masiva</button>
}

<div class="row">
    <!--begin::Col-->
    <div class="col-md-12">
        <!--begin::List widget 1-->
        <div class="card card-flush h-lg-100">
            <!--begin::Body-->
            <div class="card-body pt-5">
                <div class="bottom-buffer">
                    <div class="datatable datatable-bordered datatable-head-custom">
                        <table class="table table-striped gx-7" id="kt_datatable"></table>
                    </div>
                </div>
            </div>
            <!--end::Body-->
        </div>
        <!--end::LIst widget 1-->
    </div>
    <!--end::Col-->
</div>

<div class="modal fade" tabindex="-1" id="kt_modal_1" role="dialog" aria-labelledby="generic_modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Carga Masiva</h3>

                <!--begin::Close-->
                <div class="btn btn-icon btn-sm btn-active-light-primary ms-2" data-bs-dismiss="modal"
                     aria-label="Close">
                    <i class="ki-duotone ki-cross fs-1"><span class="path1"></span><span class="path2"></span></i>
                </div>
                <!--end::Close-->
            </div>

            <div class="modal-body">
                <form id="form_registro">

                    <div class="d-flex">
                        <div class="py-2 px-4 ">
                            <label class="form-label">Archivo </label><br />
                            <div class="fv-row">
                                <div class="dropzone" id="dropzonejs" name="dropzoneFiles">
                                    <div class="dz-message needsclick">
                                        <i class="bi bi-file-earmark-arrow-up text-primary fs-3x"></i>
                                        <div class="ms-4">
                                            <h3 class="fs-5 fw-bold text-gray-900 mb-1">
                                                Suelte los archivos aquí o haga
                                                clic
                                                para cargarlos.
                                            </h3>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="fv-row mb-6 mt-6">
                                <a class="btn btn-sm fw-bold btn-primary" asp-action="DescargarPlantilla" asp-controller="DirectorioCentrosVerificacion">Descagar Plantilla</a>
                            </div>
                        </div>
                    </div>
                </form>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-light" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary" id="btnCargaMasiva">Cargar</button>
            </div>
        </div>
    </div>
</div>
<partial name="~/Views/Shared/_ModalRegistro.cshtml" model="string.Empty" />
<partial name="~/Views/Shared/_ModalDetalle.cshtml" model="string.Empty" />

@section Scripts{
    <script src="~/lib/datatable/dist/js/jquery.dataTables.min.js"></script>
    <script src="~/lib/datatable/dist/js/dataTables.bootstrap4.min.js"></script>
    <script type="module" src="~/lib/tempus-dominus/js/tempus-dominus.min.js"></script>
    <script type="module" src="~/lib/tempus-dominus/js/jQuery-provider.js"></script>
    <script src="~/lib/dropzone/dist/dropzone-min.js"></script>
    
    <script src="~/lib/es6-shim/dist/es6-shim.min.js"></script>
    <script src="~/lib/formvalidation/dist/js/FormValidation.full.min.js"></script>
    <script src="~/js/DirectorioCentrosVerificacion/smadot.index.js" asp-append-version="true"></script>
}