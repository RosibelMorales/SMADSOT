@using System.Globalization;
@model Smadot.Models.Entities.PortalCitas.Response.PortalCitasComprobanteResponse
@{
    //ViewBag.Title = "Acreditación de Técnicos Verificadores";
    ViewBag.Title = "Portal Citas";
    Layout = "~/Views/Shared/_LayoutPublico.cshtml";
}

@section styles {
    @*<link rel="stylesheet" href="~/lib/datatable/dist/css/dataTables.bootstrap4.min.css" />*@
    <link rel="stylesheet" href="~/lib/tempus-dominus/css/tempus-dominus.css" />
    <style>
    </style>
}

@*@section breadcrumb{
<li class="breadcrumb-item">
<a href="#" class="text-muted text-hover-primary">Seguimiento a CVV</a>
</li>
<li class="breadcrumb-item">
<span class="bullet bg-gray-400 w-5px h-2px"></span>
</li>
<li class="active">@ViewBag.Title</li>
}
*@
@section toolbar {
    @* <a class="btn btn-sm fw-bold btn-primary" asp-controller="AcreditacionTecnicoVerificador" asp-action="Registro">
<span class="fa fa-plus"></span>&nbsp; Registrar Acreditación
</a>*@
}

@if (Model.Id != 0 @* && @ViewBag.MensajeCitaConfirmada == "¡La cita fue confirmada con Éxito!" *@)
{
    <div class="row">
        <div class="col-md-12">
            <div class="bottom-buffer">
                <div class="d-flex flex-column flex-column-fluid">
                    <div class="app-content  flex-column-fluid ">
                        <div class="app-container  container-xxl ">
                            <div class="card d-flex flex-row-fluid flex-start">
                                <div class="card-body w-100">
                                    @if (Model.Cancelada == true)
                                    {
                                        <span class="badge badge-danger badge-square badge-lg my-5 px-3">Cancelada</span>
                                    }
                                    <p style="font-size: 15px;">
                                        Estimado(a) <b style="font-size: 16px;">@Model.NombrePersona: </b>
                                    </p>
                                    <p style="font-size: 15px;">
                                        Ha confirmado su cita para el día
                                        <b>@Model.Fecha.Value.ToString("D", CultureInfo.GetCultureInfo("es-ES"))</b>, a las
                                        <b>@Model.Fecha.Value.ToString("t", CultureInfo.GetCultureInfo("es-ES")) hrs.</b>
                                    </p>
                                    <p style="font-size: 15px;">
                                        Por lo cual le reiteramos debe presentarse en el
                                        <b>@Model.NombreCentroVerificacion.ToUpper()</b> en la fecha y hora antes
                                        mencionadas.
                                    </p>
                                    <div class="row">
                                        <div class="col-lg-1">
                                            <p class="fs-5">Placa</p>
                                            <p class="fw-bolder fs-5">@Model.Placa</p>
                                        </div>
                                        <div class="col-lg-3">
                                            <p class="fs-5">Número de Serie</p>
                                            <p class="fw-bolder fs-5">@Model.Serie</p>
                                        </div>
                                        <div class="col-lg-2">
                                            <p class="fs-5">Marca</p>
                                            <p class="fw-bolder fs-5">@Model.Marca</p>
                                        </div>
                                        @if (Model.Poblano)
                                        {
                                            <div class="col-lg-4">
                                                <p class="fs-5">Modelo</p>
                                                <p class="fw-bolder fs-5">@Model.Modelo</p>
                                            </div>
                                        }
                                        <div class="col-lg-1">
                                            <p class="fs-5">Año</p>
                                            <p class="fw-bolder fs-5">@Model.Anio</p>
                                        </div>
                                        <div class="col-lg-1">
                                            <p class="fs-5">Estado</p>
                                            <p class="fw-bolder fs-5">@Model.Estado</p>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="row">
                                        <div class="col-md-12 col-lg-6 col-12">
                                            <p style="font-size: 15px;">
                                                Le recordamos que el <b>Folio</b> de su Cita es:
                                            </p>

                                            <div style="text-align-last:center;" class="row">
                                                <div class="col-md-6 col-12" style="display: flex;align-items: center;">
                                                    <p style="font-size: 30px;text-align-last: center;">
                                                        <b>@Model.Folio</b>
                                                    </p>
                                                </div>
                                                <div class="col-md-6 col-12">
                                                    <img alt="Embedded QR Code" style='width:200px; height:200px'
                                                     src="data:image/@ViewBag.imgType;base64,@Html.Raw(ViewBag.qrCodeImageAsBase64)" />
                                                </div>

                                            </div>
                                        </div>
                                        <div class="col-md-12 col-lg-6 col-12">
                                            <p style="font-size: 15px"><b>Notas: </b></p>
                                            <ul style="font-size: 15px;">
                                                <li>Deberá llegar a su cita al menos 05 minutos antes</li>
                                                <li>Presentarse con original y copia de todos los requisitos</li>
                                                <li>
                                                    Se recomienda que el vehículo llegue con la temperatura normal de
                                                    operación para realizar la prueba
                                                </li>
                                                <li>
                                                    No es recomendable prender y apagar el vehículo mientras se encuentra en
                                                    espera para pasar a la prueba
                                                </li>
                                                <li>
                                                    Se recomienda que los vehículos nuevos realicen la prueba con al menos
                                                    300 km recorridos
                                                </li>
                                            </ul>

                                        </div>
                                    </div>
                                    <hr>
                                </div>

                                <div class="card-body w-100">
                                    <div class="row">
                                        @if (!Model.Cancelada)
                                        {
                                            <div class="col-md-4 col-3" style="text-align-last: end;">
                                                <button type="button" id="btnImprimirCita"
                                                data-url="@(Model.Folio + "/" + Model.UrlComprobante.Split("/")[Model.UrlComprobante.Split("/").Length - 1])"
                                                class="btn btn-primary">
                                                    Imprimir
                                                </button>
                                            </div>

                                            <div class="col-md-4 col-4" style="text-align-last: center;">
                                                <button type="button" id="btnCancelarCita" data-id="@Model.Id"
                                                data-folio="@Model.Folio" class="btn btn-primary">
                                                    Cancelar
                                                </button>
                                            </div>
                                        }

                                        <div class="col-md-4 col-5" style="text-align-last: start; ">
                                            <a asp-controller="PortalCitas" asp-action="Index" class="btn btn-primary">
                                                Nueva
                                                Cita
                                            </a>
                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="d-flex flex-column flex-column-fluid" id="NavStepDiv" style="display:none!important">
                </div>


            </div>
        </div>
    </div>
}
else if (ViewBag.Expirada)
{
    <div class="row">
        <div class="col-md-12">
            <div class="bottom-buffer">
                <div class="d-flex flex-column flex-column-fluid">
                    <div class="app-content  flex-column-fluid ">
                        <div class="app-container  container-xxl ">
                            <div class="card d-flex flex-row-fluid flex-start">
                                <div class="card-body w-100">
                                    <div class="row">
                                        <p style="font-size: 15px;">
                                            Estimado(a) <b style="font-size: 16px;">@Model.NombrePersona. </b>
                                        </p>
                                    </div>
                                    <div class="row">
                                        <p style="font-size: 15px;">
                                            <b>Ha superdo el tiempo limite de espera para confirmar la cita con Folio: @Model.Folio.</b>
                                        </p>
                                    </div>
                                    <div class="row">
                                        <p style="font-size: 15px;">
                                            <b>Es necesario agendar una nueva cita.</b>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
else
{
    <div class="row">
        <div class="col-md-12">
            <div class="bottom-buffer">
                <div class="d-flex flex-column flex-column-fluid">
                    <div class="app-content  flex-column-fluid ">
                        <div class="app-container  container-xxl ">
                            <div class="card d-flex flex-row-fluid flex-start">
                                <div class="card-body w-100">
                                    <a href="#" class="card hover-elevate-up shadow-sm parent-hover">
                                        <div class="card-body d-flex align-items">
                                            <span class="ms-3 text-gray-700 parent-hover-primary fs-6 fw-bold">
                                                No se encontró información de la cita.
                                            </span>
                                        </div>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
    
<partial name="~/Views/Shared/_ModalRegistro.cshtml" model="string.Empty" />
@section Scripts {
    <script src="~/js/PortalCitas/smadot.portalcitas.consulta.js" asp-append-version="true"></script>
    }