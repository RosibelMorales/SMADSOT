@using System.Globalization;
@{
    ViewData["Title"] = "Configuración de Horarios de Citas";
    Layout = "~/Views/Shared/_LayoutSmadot.cshtml";
}

@section styles{
    <link rel="stylesheet" href="~/assets/plugins/custom/prismjs/prismjs.bundle.css" />
    <link rel="stylesheet" href="~/assets/plugins/custom/datatables/datatables.bundle.css" />
    <link href="~/assets/plugins/global/plugins.bundle.css" rel="stylesheet" type="text/css" />
    <script src="~/assets/plugins/global/plugins.bundle.js"></script>
    <style>

    </style>

}
@section breadcrumb{
    <li class="breadcrumb-item">
        <a href="#" class="text-muted text-hover-primary">Trámites</a>
    </li>
    <li class="breadcrumb-item">
        <span class="bullet bg-gray-400 w-5px h-2px"></span>
    </li>
    <li class="breadcrumb-item">
        <a href="#" class="text-muted text-hover-primary">Consultas </a>
    </li>
    <li class="breadcrumb-item">
        <span class="bullet bg-gray-400 w-5px h-2px"></span>
    </li>
    <li class="breadcrumb-item">
        <a asp-action="Index" class="text-muted text-hover-primary">Directorio de Verificentros </a>
    </li>
    <li class="breadcrumb-item">
        <span class="bullet bg-gray-400 w-5px h-2px"></span>
    </li>
    <li class="breadcrumb-item">
        <a asp-action="ConfiguradorCitas" asp-route-id="@ViewBag.IdCVV" class="text-muted text-hover-primary">Directorio de Verificentros </a>
    </li>
    <li class="breadcrumb-item">
        <span class="bullet bg-gray-400 w-5px h-2px"></span>
    </li>

    <li class="active">@ViewData["Title"]</li>
}

@section toolbar{

}

<div class="row">
    <div class="col-md-12">
        <div class="card h-lg-100">
            <div class="card-header">
                <h3 class="card-title">Carga de Horarios de las Citas @ViewBag.Nombre</h3>

            </div>
            <div class="card-body pt-5 mt-5">
                <form id="formHorarios">
                    <input id="IdCVV" value="@ViewBag.IdCVV" type="hidden" />
                    <!--begin::Row-->
                    <div class="row mw-500px mb-3 px-4" data-kt-buttons="true" data-kt-buttons-target=".form-check-image, .form-check-input">
                        <!--begin::Col-->
                        <div class="col-4">
                            <div class="form-check form-check-sm form-check-custom form-check-solid">
                                <input class="form-check-input" type="radio" checked value="1" name="option2" />
                                <div class="form-check-label">
                                    Por Rango
                                </div>
                            </div>
                        </div>
                        <!--end::Col-->
                        <!--begin::Col-->
                        <div class="col-4">
                            <div class="form-check form-check-custom form-check-sm form-check-solid me-10">
                                <input class="form-check-input" type="radio" value="2" name="option2" id="text_wow" />
                                <div class="form-check-label">
                                    Por Mes
                                </div>
                            </div>
                        </div>
                        <!--end::Col-->
                    </div>
                    <!--end::Row-->
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-3 col-md-4 col-sm-6 px-4 pt-5" id="container-meses">

                                <label class="form-label form-label-sm align-self-center w-lg-100">Rango de Fechas:</label>
                                <div class="input-group input-group-sm">
                                    <input id="Fecha" type="text" class="form-control form-control-sm" readonly
                                           autocomplete="off" />
                                    <span class="input-group-text" id="Fecha_open">
                                        <i class="bi bi-calendar ">
                                            <span class="path1"></span><span class="path2"></span>
                                        </i>
                                    </span>
                                </div>
                                <!-- Contenedor de Rango de Fechas -->
                            </div>
                            <div class="col-lg-3 col-md-4 col-sm-6 px-4 pt-5" id="container-fechas" style="display:none">

                                <label class="form-label form-label-sm align-self-center">Cita:</label>
                                <select class="form-select" aria-label="Select example" id="mesSelect" name="Mes">
                                    @{
                                        // Obtenemos el mes actual y el número del mes actual
                                        DateTime fechaActual = DateTime.Now;
                                        int mesActual = fechaActual.Month;

                                        // Generamos las opciones para los meses restantes del año
                                        for (int i = mesActual; i <= 12; i++)
                                        {
                                            <option value="@i">@DateTimeFormatInfo.CurrentInfo.GetMonthName(i)</option>
                                        }
                                    }
                                </select>
                            </div>
                            <div class="col-lg-3 col-md-4 col-sm-6 px-4 pt-5">
                                <label class="form-label form-label-sm align-self-center">Hora de Inicio:</label>
                                <input class="form-control form-control-sm main-timepicker" name="HoraInicio" id="HoraInicio" placeholder="00:00" />

                            </div>
                            <div class="col-lg-3 col-md-4 col-sm-6 px-4 pt-5">
                                <label class="form-label form-label-sm align-self-center">Hora de Fin:</label>
                                <input class="form-control form-control-sm main-timepicker" name="HoraFin" id="HoraFin" placeholder="00:00" />

                            </div>
                            <div class="col-lg-3 col-md-4 col-sm-6 px-4 pt-5">
                                <label class="form-label form-label-sm align-self-center">Capacidad:</label>
                                <input class="form-control form-control-sm" type="number" name="Capacidad" id="Capacidad" placeholder="1" value="4" />

                            </div>
                            <div class="col-lg-3 col-md-4 col-sm-6 px-4 pt-5">
                                <label class="form-label form-label-sm align-self-center">Duración de las Citas:</label>
                                <div class="input-group input-group-sm">
                                    <input type="number" class="form-control form-control-sm" name="Intervalo" id="Intervalo" placeholder="0" aria-describedby="inputGroup-sizing-sm" value="8" />
                                    <span class="input-group-text">min.</span>
                                </div>
                            </div>
                        </div>

                    </div>
                </form>
                <div class="pt-8">
                    <!--begin::Heading-->
                    <h3 class="anchor px-2" id="responsive" data-kt-scroll-offset="50">
                        Horarios Cargados
                    </h3>
                    <div class="d-flex flex-row flex-end">
                        <button class="btn btn-primary btn-active-secondary mx-2" id="btn-guardar">Guardar</button>
                        <button class="btn mx-2 btn-active-secondary" style="background:var(--bs-link-color);color:#fff" id="btn-cargar">Cargar</button>
                        <button class="btn btn-secondary mx-2" id="btn-borrar">Borrar</button>
                    </div>
                        <form id="form-dt-horarios">
                            <table class="table table-striped border rounded gy-5 gs-7 w-100" id="kt_datatable">
                            </table>
                        </form>
                    <!--end::Block-->
                </div>


            </div>
        </div>
    </div>
</div>
@section Scripts{
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/assets/plugins/custom/prismjs/prismjs.bundle.js"></script>
    <script src="~/assets/plugins/custom/datatables/datatables.bundle.js"></script>
    <script src="~/lib/es6-shim/dist/es6-shim.min.js"></script>

    <script src="~/js/ConfiguradorCita/smadot.CargarHorarios.js" asp-append-version="true"></script>
}